<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>

    <h1>Pomodoro Timer &#127813;</h1>

    <div class="general">
    <div class="container">
       <div class="time"><span id="minutes">00</span>:<span id="seconds">08</span></div> 
        <br><br>
        <button id="start">Start</button>
        <button id="pause">Pause</button>
        <button id="reset">Reset</button>

        <div class="extras">
            <button id="five">05:00</button>
            <button id="ten">10:00</button>
            <button id="fifteen">15:00</button>
        </div>

    </div>
    </div>

    <script>
        let minutes, seconds, counterInterval = undefined;

        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const start = document.getElementById('start');
        const pause = document.getElementById('pause');
        const reset = document.getElementById('reset');
        const five = document.getElementById('five');
        const ten = document.getElementById('ten');
        const fifteen = document.getElementById('fifteen');

        start.addEventListener('click', startCounter);
        pause.addEventListener('click', pauseCounter);
        reset.addEventListener('click', resetCounter);

        resetCounter();

        five.addEventListener('click', function() { if(counterInterval) return; minutes = 5; updateCounterEl();});
        ten.addEventListener('click', function() { if(counterInterval) return; minutes = 10; updateCounterEl();});
        fifteen.addEventListener('click', function() { if(counterInterval) return; minutes = 15; updateCounterEl();});


        function updateCounterEl() {
            minutesEl.innerHTML = minutes < 10 ? `0${minutes}` : minutes;
            secondsEl.innerHTML = seconds < 10 ? `0${seconds}` : seconds;
        }

        function startCounter() {
            if(counterInterval) return;

           counterInterval = setInterval(() => {
            const timeOver = !seconds && !minutes; //O ! Ã© a mesma coisa que 0
            const secondsOver = !seconds;

                if(timeOver) return destroyInterval();

                if(secondsOver) {
                    seconds = 59;
                    --minutes;
                    updateCounterEl();
                    return;
                }

                --seconds;
                updateCounterEl();
            }, 1000); //1 segundo
        }

        function pauseCounter() {
            destroyInterval();
        }

        function destroyInterval() {
            clearInterval(counterInterval);
            counterInterval = undefined;
        }

        function resetCounter() {
            destroyInterval();
            minutes = 25;
            seconds = 00;
            updateCounterEl();
        }
    </script>
    
</body>
</html>